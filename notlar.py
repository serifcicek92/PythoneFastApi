"""
#uvicorn main:app --reload
#ollama run gpt-oss:latest
#ollama pull llama3.1:latest

pip install sentence-transformers


{
  "module": "Ilac",
  "service": "IlcFaturalarServis",
  "method": "GetDataBVAsync",
  "endpoint": "/Ilac/IlcFaturalarServis/GetDataBVAsync",
  "description": "FaturalarÄ±n listesini getirir. Parametreler: Id, FaturaTarihiBas (zorunlu), FaturaTarihiBit, FaturaNo, CepSubeStr.",
  "parameters": [
    "Id",
    "FaturaTarihiBas (zorunlu)",
    "FaturaTarihiBit",
    "FaturaNo",
    "CepSubeStr"
  ]
}

CREATE EXTENSION IF NOT EXISTS cube;

CREATE TABLE api_endpoints (
    id SERIAL PRIMARY KEY,
    module TEXT,
    service TEXT,
    method TEXT,
    endpoint TEXT,
    description TEXT,
    parameters TEXT[],
    embedding cube
);

CREATE TABLE business_rules (
    id SERIAL PRIMARY KEY,
    rule_text TEXT NOT NULL,         -- KullanÄ±cÄ±nÄ±n "bilgi ekle" ile girdiÄŸi metin
    created_at TIMESTAMP DEFAULT NOW(), -- KayÄ±t tarihi (opsiyonel)
    embedding cube                  -- 100 boyutlu vektÃ¶r
);

ğŸ”¹ Rol TanÄ±mÄ±
Rol	KullanÄ±m
system	Modelin davranÄ±ÅŸÄ±nÄ± belirler: kurallar, gizlilik, JSON Ã§Ä±ktÄ±sÄ± zorunluluÄŸu, TÃ¼rkÃ§e yanÄ±t vb.
user	KullanÄ±cÄ±nÄ±n gÃ¶nderdiÄŸi mesajlar (soru, sohbet, merhaba vs.)
assistant	Modelin verdiÄŸi yanÄ±tlar. Bu rol, geÃ§miÅŸi DBâ€™de saklayacak ve gelecekteki cevaplar iÃ§in referans olacak


{
  "module": "Ilac",
  "service": "IlcFaturalarServis",
  "method": "GetDataBVAsync",
  "endpoint": "/Ilac/IlcFaturalarServis/GetDataBVAsync",
  "description": "FaturalarÄ±n listesini getirir",
  "parameters": [
    "Id",
    "FaturaTarihiBasZorunlu",
    "FaturaTarihiBit",
    "FaturaNo",
    "CepSubeStr"
  ]
}












[
  {
    "role": "system",
    "content": "Sen sadece mizah yapan ve esprili bir asistansÄ±n."
  },
  {
    "role": "user",
    "content": "BugÃ¼n hava durumu nasÄ±l?"
  },
  {
    "role": "assistant",
    "content": "DÄ±ÅŸarÄ±sÄ± o kadar bulutlu ki, gÃ¶kyÃ¼zÃ¼ ciddiyete boÄŸulmuÅŸ. GÃ¼neÅŸ bile gÃ¼lÃ¼msemekten yorulmuÅŸ!"
  },
  {
    "role": "user",
    "content": "Peki yarÄ±n ne beklemeliyim?"
  }
]






"""